@{
    var stations = ViewBag.Stations;
    var drivers = ViewBag.Drivers;
    var supplyRequest = ViewBag.SupplyRequest;
    var requestStation = ViewBag.requestStation;
}
<head>
    <title>Create/Update Supply Request</title>
</head>
<body>
    @if (supplyRequest != null)
    {
        <h1>Edit Supply Request</h1>
        @Html.ValidationSummary()
        <form action="@Url.Action("EditSupplyRequest", "ManageSupplyRequests")" method="post">
            <div>
                <input type="hidden" name="disID" id="disID" placeholder="Distribution ID" value="@supplyRequest.disID">
            </div>
            <div>
                <label>Station: @requestStation.staDistrict</label>
            </div>
            <div>
                <label>Driver</label>
                <select name="driverID" id="driverID">
                    @foreach (var driver in drivers) 
                    {
                        <option value="@driver.USER_ID">@driver.USERNAME</option>
                    }
                </select>
            </div>
            <div>
                <label>Distribution Start Date: @supplyRequest.distributionStartDate</label>
            </div>
            @if (supplyRequest.expectedEndDate != null)
            {
                <div>
                    <label>Expected End Date: @supplyRequest.expectedEndDate</label>
                </div>
            }
            <div>
            @if (supplyRequest.accepted == 0) 
            {
                <label>Accepted?: No</label>
            }
            else 
            {
                <label>Accepted?: No</label>
            }
            </div>
            <div>
                <label>Arrival Hours</label>
                <input type="number" id="arrivalHours" name="arrivalHours" min="1" max="999">
            </div>    
            <div>
                <label>Current Location</label>
                @if (supplyRequest.disLocation != null) 
                {
                    <input type="text" name="disLocation" id="disLocation" value="@supplyRequest.disLocation">
                }
                else 
                {
                    <input type="text" name="disLocation" id="disLocation">
                }
            </div>
            <input type="submit" value="Submit" />
        </form>
    }
    else
    {
        <h1>Add Supply Request</h1>
        @Html.ValidationSummary()
        <form action="@Url.Action("AddSupplyRequest", "ManageSupplyRequests")" method="post">
            <div>
                <label>Station</label>
                <select name="staID" id="staID">
                    @foreach (var station in stations) 
                    {
                        <option value="@station.staID">@station.staDistrict</option>
                    }
                </select>
            </div>
            <div>
                <label>Driver</label>
                <select name="driverID" id="driverID">
                    @foreach (var driver in drivers) 
                    {
                        <option value="@driver.USER_ID">@driver.USERNAME</option>
                    }
                </select>
            </div>
            <div>
                <label>Distribution Start Date</label>
                <input type="datetime-local" id="distributionStartDate" name="distributionStartDate">
            </div>
            <div>
                <label>Expected End Date</label>
                <input type="datetime-local" id="expectedEndDate" name="expectedEndDate">
            </div>
            <input type="submit" value="Submit" />
        </form>
    }
</body>
